<!DOCTYPE html>
<html lang='en'>
<head>

  <title>{{ client_settings.WELCOME_PAGE_TITLE }}</title>

  <!-- for best viewing on mobile phones -->
  <!-- <meta name='viewport' content='width=device-width, initial-scale=1.0'> -->
  <meta name='viewport' content='user-scalable=no, width=device-width' />
  <link rel='stylesheet' type='text/css' href='./../media/mobile/css/reset.css' />
  <link rel='stylesheet' type='text/css' href='./../media/mobile/bootstrap/css/bootstrap-responsive.min.css' />

  <script type='text/javascript'>
  window.url_root = '{{ url_root }}';
  window.num_sliders = {{ statements|length }};
  window.conf = { 'SCORE_SCALE_FACTOR'  : {{ client_settings.SCORE_SCALE_FACTOR }},
  'YOUR_SCORE_LANGUAGE' : "{{ client_settings.YOUR_SCORE_LANGUAGE }}",
  'INSTRUCTIONS_3'      : "{{ client_settings.INSTRUCTIONS_3 }}",
  'FUN_COLORS'          : {{ client_settings.FUN_COLORS }}
};
</script>

<script type='text/javascript' src='http://code.jquery.com/jquery-1.9.1.js'></script>
<script>
// TURNING OFF ALL AJAX
$.ajaxSetup({
  async: false
});
</script>

<script type='text/javascript' src='./../media/mobile/js/csrf-ajax.js'></script>
<script type='text/javascript' src='http://d3js.org/d3.v2.min.js'></script>
<script type='text/javascript' src='./../media/mobile/bootstrap/js/bootstrap.min.js'></script>
<script type='text/javascript' src='./../media/mobile/js/blooms.js'></script>
<script type='text/javascript' src='./../media/mobile/js/accounts.js'></script>
<script type='text/javascript' src='./../media/mobile/js/rate.js'></script>
<script type='text/javascript' src='./../media/mobile/js/utils.js'></script>
<script type='text/javascript' src='http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js'></script>

<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type='text/javascript' src='./../media/mobile/js/stats.js'></script>
<script>
stats.setConf("{{ client_settings.AGREEMENT_HISTOGRAM_TEXT }}", 
  "{{ client_settings.LEGEND_AGREEMENT_LEFT }}",
  "{{ client_settings.LEGEND_AGREEMENT_RIGHT }}",
  "{{ client_settings.INSIGHT_HISTOGRAM_TEXT }}",
  "{{ client_settings.LEGEND_INSIGHT_LEFT }}",
  "{{ client_settings.LEGEND_INSIGHT_RIGHT }}");
</script>


<link rel='stylesheet' type='text/css' href='http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css' />
<link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Roboto+Condensed'/>
<link rel='stylesheet' type='text/css' href='./../media/mobile/css/opinionspace.css' /> 
</head>
<body>


  <div class="top-bar">
    <div class='header'>
      {% if client_settings.HEADER_IMAGE == "true" %}
      <img class="header-img-topic" src={{ client_settings.HEADER_IMAGE_SOURCE }} class="center" style="width:150px;"><br>
      {% endif %}
      Topic: {{ short_topic }}
    </div>

    <div data-role='navbar' class='menubar'>
      <ul>
        <li><a data-theme='b' class='stats-btn'>
          <span class='score-label'></span><span class='score-value'></span>
        </a></li>
        <li><a data-theme='b' class='my-comment-btn'>My Comment</a></li>
        <li><a data-theme='b' class='logout-btn'>Logout</a></li>
      </ul>
    </div>

    <div class='instructions' id='instructions'>
      <span class='inst-score'><span class='score-label'></span><span class='score-value'></span></span>
      <span class='inst-text'>{{ client_settings.INSTRUCTIONS_1 }}</span>
    </div>
    <div class="margin"><!--<br><br><br><br>--></div>
  </div>

  <!-- <div class='rate-loading'><img src='img/ajax-loader.gif'>&nbsp; Comment loading...</div> -->
  <div class='rate'>
    <div class='header'>{{ topic }}</div>

    <!--     <div class='rate-wrap'> -->
    <div id='commentInput' class='answer'></div>

    <div class='sliders'>
      <hr>
      {{ client_settings.AGREEMENT_TEXT }}<br><br>
      <div class="slider-range-labels">
        <div class="alignleft">&larr;{{ client_settings.AGREEMENT_LEFT_TEXT }}</div>
        <div class="alignright">{{ client_settings.AGREEMENT_RIGHT_TEXT }} &rarr;</div>
      </div>
      <div style="clear: both;"></div>
      <input data-track-theme='b' data-theme='a' type='range' name='slider1' id='slider1' value='50' min='0' max='100' animate='true'/>

      <hr>

      {{ client_settings.INSIGHT_TEXT }}<br/>
      <div class="slider-range-labels">
        <div class="alignleft">&larr; {{ client_settings.INSIGHT_LEFT_TEXT }}</div>
        <div class="alignright">{{ client_settings.INSIGHT_RIGHT_TEXT }} &rarr;</div>
      </div>
      <div style="clear: both;"></div>

      <input data-track-theme='b' data-theme='a' type='range' name='slider2' id='slider2' value='50' min='0' max='100' animate='true'/>
      <hr>
      <button type='submit' data-theme='a' id='go-back' onClick='rate.doneRating()'>Done Rating</button>
    </div>
    <!--     </div> -->  
    <br><br>

  </div>
  <div id='rating'>

    <div class='endsliders'>
      <div class ='slider-header'>
        <p>{{ client_settings.INSTRUCTIONS_4 }}</p>
      </div>
      <br>
      <div class='sliders-wrap' data-theme='b'>
        <center>
          {% for statement in statements %}
          {% ifnotequal statement.statement '' %}
          <p class='slider-question'> {{ statement.statement }} </p>

          <div class="slider-agree-labels">
            <div class="alignleft">&larr; <i>Strongly Disagree</i></div>
            <div class="alignright"><i>Strongly Agree</i> &rarr;</div>
          </div>
          <div style="clear: both;"></div>

          <input data-track-theme='b' data-theme='a' type='range' id='s{{statement.id}}' value='50' min='0' max='100' animate='true'/><hr>

          {% else %}
          <div style='display:none;'>
            <input data-track-theme='b' data-theme='a' type='range' id='s{{statement.id}}' value='50' min='0' max='100' animate='true'/><hr>
          </div>
          {% endifnotequal %}
          {% endfor %}
        </div>
        <button type='submit' data-theme='a' class='done-endsliders-btn'>Done</button>
      </center>
    </div>
  </div>
</div>

<div class='my-comment'>
  <div class='row' style='text-align:center;'>
    <div class='span6'>
      <br><br>
      <img src='./../media/mobile/img/bloom.png' width='10%'>
    </div>
    <div class='span6'>
      <br>
      <strong>Username:</strong><span class='username'></span><br>
      <strong><span class='score-label'></span></strong> <span class='score-value'></span><br>
      <strong>Idea Rated By: </strong><span class='num-rated-by'></span> Participants<br>
    </div>
  </div>

  <br>

  <div class='comment-region'>
    <div class='comment-text'></div>

    {% if client_settings.ALLOW_EDIT_COMMENT == "true" %}
    <button type='submit' data-theme='a' class='edit-comment-btn'>Edit Comment</button>
    {% endif %}

    <button type='submit' data-theme='a' class='edit-comment-done-btn'>Done</button>
  </div>

  <div class='edit-comment' style='display:none'>
    <textarea class='edit-comment-box'></textarea>
    <button data-theme='a' class='edit-comment-save-btn'>Save Comment</button>
    <button data-theme='a' class='edit-comment-cancel-btn'>Cancel</button>
  </div>

</div>

<div class='stats'>
  <div class='row' style='text-align:center;'>
    <div class='span6'>
      <img src='./../media/mobile/img/bloom.png' width='10%' alt='bloom'>
    </div>
    <div class='span6'>
      <br>
      <strong>Username:</strong><span class='username'></span><br>
      <strong><span class='score-label'></span></strong> <span class='score-value'></span><br>
      <strong>Idea Rated By: </strong><span class='num-rated-by'></span> Participants<br>

    </div>
  </div>

  <hr>

  <div class='graphs-wrap' style='text-align:center;'>

    <div class='graphs-insufficient' style='display:none;'>You can see a graph of the ratings you've received after you have been rated by 5 people.<br>
      Now please rate more blooms to earn more points.  Just click Done and choose any bloom..."</div>

      <div class='graphs'>
        <strong>Ratings Received</strong>
        <div class='row' style='text-align:center;'>
          <div id='graph-1' class='span6'></div>
          <div id='graph-2' class='span6'></div>
        </div>
      </div>
    </div>

    <br>
    {% if client_settings.LEADERBOARD_ENABLED == "true" %}
    <button data-theme='a' onClick="$('.leaderboard').slideDown();">Leaderboard</button>
    {% endif %}
    <button data-theme='a' class="stats-done-btn">Done</button>
  </div>

  <div class='leaderboard'>
    <br><br>
    <center><h1>Leaderboard</h1></center>

    <table class='pretty'>
      <tr>
        <th>Username</th><th>Points</th>
      </tr>
      {% for leader in leaderboard%}
      <tr>
        <td>{{ leader.username }}</td><td> {{ leader.total_score|add:'0' }}</td>
      </tr>
      {% endfor %}
    </table>

    <br><br>
    <button data-theme='a' onClick="$('.leaderboard').slideUp();">Done</button>

  </div>

  <div id='d3'>
    <!--    <div class='loading'><img src='img/ajax-loader-gray.gif'>&nbsp; Loading opinions...</div>-->
  </div>

  <!-- it is important for the frame to be after the d3 div -->
  <div class='frame'></div>
  <div class = 'register' id='register'>
    <div class = 'reg-header'>{{ client_settings.INSTRUCTIONS_5 }}</div>
    <form method='post' action='{{ url_root }}/accountsjson/register/' id='reg_form'>
      <input type='hidden' value='{{ topic }}' name='question'>
      <input type='hidden' value='{{ url_root }}' name='url'>

      <div data-role='fieldcontain'>
        <label for='regusername'>Username:</label>
        <input type='text' id='regusername' name='regusername'>
        <div class='alert-error' id='username-error' style='display:none;'></div>
      </div>

      <div data-role='fieldcontain'>
        <label for='regpassword1'>Password:</label>
        <input type ='password' id='regpassword1' name='regpassword1'>
        <div class='alert-error' id='password-error' style='display:none;'></div>
      </div> 

      <div data-role='fieldcontain'>
        <label for='regemail'>Email:</label>
        <input type ='text' id='regemail' name='regemail'>
        <div class='alert-error' id='email-error' style='display:none;'> </div>
      </div> 

      <input type='submit' value='Submit' id='finishRegistration'>
    </form>
    <br><br><br>
  </div>

  <div class='comment-input'>
    <div class = 'reg-header'>{{ client_settings.INSTRUCTIONS_6 }}</div>
    <div id = 'reg-question'> <p>{{ topic }}</p>
      <textarea rows='20' cols = '30' name = 'answer' id='entered-comment'> </textarea> 
    </div>
    <input type='submit' value='Done' data-theme='a' class='comment-submit-btn'>
  </div>

  <div class='login' id='login'>
    <div class='login-header'>Please Login</div>

    <div class='alert-error' id='login-error' style='display:none;'>
      Please check your username and password and try again.
    </div>

    <form id='login_form'>
      <br>
      <p class='label'>Username</p>
      <input type='text' name='username'>
      <p class ='label'>Password</p>
      <input type='password' name='password'>
      <!-- <button type='submit' data-theme='a' id='login-button'>Login</button>  -->
      <input type='submit' value='Login'>
    </form>
  </div>

</div>

<div class='logout'>
  <div class='landing-header'>
    Thank you for participating!
  </div>

  {% if client_settings.HEADER_IMAGE == "true" %}
  <img class="header-img-topic" src={{ client_settings.HEADER_IMAGE_SOURCE }} class="center" style="width:150px;"><br>
  {% endif %}

  <p> Return at any time to check your progress!<br> You can see how other participants are rating your idea. </p><br>

  <img src='./../media/mobile/img/bar_graph.png' class='center'>
  <br> 
  <div class='ui-body ui-body-b'
  <fieldset class='ui-grid-a'>
    <button data-theme='a' class='logout-start-over'>Start Over</button>
    <button data-theme='b' class='logout-login-again'>Login again?</button>
  </fieldset>
</div>
</div>

<div class='landing'>
  <div class='landing-intro'>
    <div class='landing-header'>
      {{ client_settings.WELCOME_PAGE_TITLE }}
    </div>

    {% if client_settings.HEADER_IMAGE == "true" %}
    <img class="header-img-topic" src={{ client_settings.HEADER_IMAGE_SOURCE }} class="center" style="width:150px;"><br>
    {% endif %}

    <p> The "Collective Discovery Engine" is an interactive visual and social environment designed to allow participants to collaboratively generate, cultivate, and evaluate ideas around topics of mutual interest. </p><br>
    <p> <strong>Select a bloom</strong> to read an idea, and then <strong>rate it</strong> and add your own ideas. </p>
  </div>
  <div class='ui-body ui-body-b'
  <fieldset class='ui-grid-a'>
    <button type='submit' data-theme='a' class='first-time-btn'>First time</button>
    <button type='cancel' data-theme='b' class='login-btn'>Returning</button>
  </fieldset>
</div>
<br><br>
<img id='splash' src='./../media/mobile/img/os_splash.png' class='center'> 
</div>




</body>
</html>
