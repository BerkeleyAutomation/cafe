<!DOCTYPE html>
<html lang='en'>
<head>

  <title>{{ client_settings.WELCOME_PAGE_TITLE }}</title>

  <!-- for best viewing on mobile phones -->
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->

  <!-- I think this prevents unnecessary horizontal scrolling,
  have to double-check with overflow css -->
  <meta name="viewport" content="user-scalable=no, width=device-width" />

  <link rel='stylesheet' type='text/css' href='./../media/mobile/css/reset.css' />
  <link rel='stylesheet' type='text/css' href='./../media/mobile/bootstrap/css/bootstrap-responsive.min.css' />
  <!--<link rel='stylesheet' type='text/css' href='css/opinionspace.css' /> -->

  <script type="text/javascript">
  console.log("im setting the variables NOW");
  window.url_root = "{{ url_root }}";
  window.num_sliders = {{ statements|length }};
  window.authenticated = {{ loggedIn }};
  window.user_score = {{ client_data.score }};
  window.username_test = "{{ client_data.username }}";
  console.log("user_score:" + window.user_score.toString());
  console.log("authenticated:" + window.authenticated.toString());
  console.log("username:" + window.username_test.toString());

  </script>
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script type='text/javascript' src='./../media/mobile/js/csrf-ajax.js'></script>
  <script type='text/javascript' src='./../media/mobile/js/d3.v2.min.js'></script>
  <script type='text/javascript' src='./../media/mobile/js/opinion-space-utils.js'></script>
  <script type='text/javascript' src='./../media/mobile/bootstrap/js/bootstrap.min.js'></script>
  <script type='text/javascript' src='./../media/mobile/js/os.js'></script>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
  <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
  <link rel='stylesheet' type='text/css' href='./../media/mobile/css/opinionspace.css' />
  

</head>
<body>

  <div class="loading">
    <br><br>
    <img src="./../media/mobile/img/loader.gif">
  </div>

  <div class='header'><strong>Topic: {{ short_topic }}</strong></div>

  <div data-role="navbar" id="menubar">
    <ul>
      <li><a href="#" data-theme="b" onClick="$('.stats').slideDown();"><span id="score2"><span id="score-label2">Score: </span><span id="score-holder2"></span></span>
      </a></li>
      <li><a href="#" data-theme="b" onClick="$('.myBloom').slideDown();">My Bloom</a></li>
      <li><a href="#" data-theme="b" onClick="$('.stats').slideDown();">My Stats</a></li>
      <!-- <li><a href="#" data-theme="b" onClick="">Sign Out</a></li> -->
    </ul>
  </div>


  <div class="instructions" id="instructions">
    <span id="score"><span id="score-label"></span><span id="score-holder"></span></span>
    <span id="inst_text">{{ client_settings.INSTRUCTIONS_1 }}</span>
  <!--
  <span id="menubar">
    <a href="#" onClick="$('.myBloom').slideDown();">[My Bloom]</a>
    <a href="#" onClick="$('.stats').slideDown();">[See Stats]</a>
    <a href="#" onClick="$('.help').slideDown();">[Help]</a>
  </span> -->
</div>


<!-- <div class="rate-loading"><img src="img/ajax-loader.gif">&nbsp; Comment loading...</div> -->
<div class="rate">
  <div class='header'><strong>{{ topic }}</strong></div>

  <!--     <div class="rate-wrap"> -->
  <div id="commentInput" class="answer"></div>

  <div class="sliders">
    <hr>
    {{ client_settings.AGREEMENT_TEXT }}<br/>
    <input data-track-theme="b" data-theme="a" type="range" name="slider1" id="slider1" value="50" min="0" max="100" animate="true"/>
    <hr>
    {{ client_settings.INSIGHT_TEXT }}<br/>
    <input data-track-theme="b" data-theme="a" type="range" name="slider2" id="slider2" value="50" min="0" max="100" animate="true"/>
    <hr>
    <button type="submit" data-theme="a" id="go-back" onClick="utils.doneRating()">Done Rating</button>
  </div>
  <!--     </div> -->  
  <br><br>

</div>
<div id='rating'>

  <div class="endsliders">
    <div class ='slider-header'>
      <p>{{ client_settings.INSTRUCTIONS_4 }}</p>
    </div>
    <br>
    <div class="sliders-wrap" data-theme="b">
      <center>
        {% for statement in statements %}
        {% ifnotequal statement.statement "" %}
        <p class='slider-question'> {{ statement.statement }} </p>
        <input data-track-theme="b" data-theme="a" type="range" id="s{{statement.id}}" value="50" min="0" max="100" animate="true"/><hr>
        {% else %}
        <div style="display:none;">
          <input data-track-theme="b" data-theme="a" type="range" id="s{{statement.id}}" value="50" min="0" max="100" animate="true"/><hr>
        </div>
        {% endifnotequal %}
        {% endfor %}
      </div>
      <button type="submit" data-theme="a" onClick="utils.storeSliders({{ statements|length }})">Done</button>
    </center>
  </div>
</div>
</div>

<div class='myBloom'>
  <div class="row" style="text-align:center;">
    <div class="span6">
      <br><br>
      <img src="./../media/mobile/bloom.png" width="10%" alt="bloom">
    </div>
    <div class="span6">
      <br>
      <strong>Username:</strong> {{ client_data.username }}<br>
      <strong>Score:</strong> <span id="score-holder3"></span> Points<br>
      <strong>Idea Rated By: </strong>{{ client_data.rated_by }} Participants<br>
    </div>
  </div>

  <br>

  <div id="commentRegion">

    <div id="commentText">
      {{ client_data.comment }}
    </div>

    <!-- <button type="submit" data-theme="a" onClick="utils.editComment();">Edit Comment</button> -->
    <button type="submit" data-theme="a" onClick="$('.myBloom').slideUp();$('#menubar').find('.ui-btn-active').removeClass('ui-btn-active ui-focus');
    ">Done</button>
  </div>

  <div id="editComment" style="display:none">
    <div data-role="fieldcontain">
      <textarea id="editCommentBox">  {{ client_data.comment }} </textarea>
    </div>

    <button type="submit" data-theme="a" onClick="">Save Comment</button>
    <button type="submit" data-theme="a" onClick="$('.myBloom').slideUp();$('#menubar').find('.ui-btn-active').removeClass('ui-btn-active ui-focus');
    ">Cancel</button>
  </div>

</div>

<div class='stats'>
  <div class="row" style="text-align:center;">
    <div class="span6">
      <img src="./../media/mobile/bloom.png" width="10%" alt="bloom">
    </div>
    <div class="span6">
      <br>
      <strong>Username:</strong> {{ client_data.username }}<br>
      <strong>Score:</strong> <span id="score-holder4"></span> Points<br>
      <strong>Idea Rated By: </strong>{{ client_data.rated_by}} Participants<br>

    </div>
  </div>


  <hr>
  <!--
  See how other participants rated your bloom:<br><br>

  <strong>Agreement rating:</strong><br>
  <strong></strong><input data-track-theme="b" data-theme="a" type="range" id="agreement" value="86" min="0" max="100" disabled="true"/>
  <hr>
  <strong>Insightful rating:</strong><br>
  <strong></strong><input data-track-theme="b" data-theme="a" type="range" id="insightful" id="slider2" value="63" min="0" max="100" disabled="true"/>
  <hr> -->
  <center><h1>Leaderboard</h1><center>

    <table class="pretty">
      <tr>
        <th>Username</th><th>Points</th>
      </tr>
      {% for leader in leaderboard%}
      <tr>
        <td>{{ leader.username }}</td><td> {{ leader.total_score|add:"0" }}</td>
      </tr>
      {% endfor %}
    </table>

  <!-- <div id="bargraph">
</div> -->

<br>

<!-- <button data-theme="a" onClick="$('.leaderboard').slideDown();">Leaderboard</button> -->

<button type="submit" data-theme="a" onClick="$('.stats').slideUp();$('#menubar').find('.ui-btn-active').removeClass('ui-btn-active ui-focus');
">Done</button>
</div>

<div class='leaderboard'>
  <br><br>
  <center><h1>Leaderboard</h1><center>

    <table class="pretty">
      <tr>
        <th>Username</th><th>Points</th>
      </tr>
      {% for leader in leaderboard%}
      <tr>
        <td>{{ leader.username }}</td><td> {{ leader.total_score|add:"0" }}</td>
      </tr>
      {% endfor %}
    </table>

    <br><br>
    <button type="submit" data-theme="a" onClick="$('.leaderboard').slideUp();$('#menubar').find('.ui-btn-active').removeClass('ui-btn-active ui-focus');
    ">Done</button>

  </div>

  <div class='help'>

    <h2>Opinion Space helps participants:<h2><br>
      Visualize their relationships to other participants.<br>
      Express thoughtful ideas and suggestions about emerging issues and products.<br>
      Engage in friendly competition with other participants.<br>
      Learn and gain insights from other participants.<br><br>

      It works like this: new participants use graphical sliders to express the degree to which they agree or disagree with five baseline statements such as: "I'm very interested in issue A", "I am an active user of product B".  These responses are combined to display the new participant as a unique point in a map.  The map is not based on predetermined categories, but on similarity of interests, behavior, and perspectives.  It is designed to "depolarize" discussions by including all participants on a single level playing field.<br><br>

      Participants click on the points of other community members to read ideas and suggestions on discussion topics such as "What new approaches could be used to address issue C?  "What features would you like to see in a new version of product D?".  Participants evaluate the ideas of others and enter their own ideas.  Participants earn points as Reviewers based on how they evaluate the ideas of others and earn points as Authors based on how others rate their own ideas.
      <button type="submit" data-theme="a" onClick="$('.help').slideUp();">Done</button>
    </div> 

    <div id='d3'>
<!--    <div class="loading"><img src='img/ajax-loader-gray.gif'>&nbsp; Loading opinions...</div>
-->  </div>
<!-- it is important for the frame to be after the d3 div -->
<div class="frame"></div>
<div class = 'register' id="register">
  <div class = 'reg-header'>{{ client_settings.INSTRUCTIONS_5 }}</div>
  <form method='post' action='{{ url_root }}/accountsjson/register/' id='reg_form'>
    <input type='hidden' value='{{ topic }}' name='question'>
    <input type='hidden' value='{{ url_root }}' name='url'>

    <div data-role="fieldcontain">
      <label for="regusername">Username:</label><br>
      <input type="text" id="regusername" name="regusername">
      <div class="alert-error" id="username-error" style="display:none;">
        Usernames should only contain numbers and letters.
      </div>
    </div>

    <div data-role="fieldcontain">
      <label for="regpassword1">Password:</label><br>
      <input type ="password" id="regpassword1" name="regpassword1">
      <div class="alert-error" id="password-error" style="display:none;">
        Please enter a password.
      </div>
    </div> 

    <div data-role="fieldcontain">
      <label for="regemail">Email:</label><br>
      <input type ="text" id="regemail" name="regemail">
      <div class="alert-error" id="email-error" style="display:none;">
        That does not look like an email address.
      </div>
    </div> 

    <input type="submit" value="Submit" id="finishRegistration">
  </form>
  <br><br><br>
</div>

<div class="comment-input">
  <div class = 'reg-header'>{{ client_settings.INSTRUCTIONS_6 }}</div>
  <div id = 'reg-question'> <p>{{ topic }}</p>
    <textarea rows="20" cols = "30" name = "answer" id="entered-comment"> </textarea> 
  </div>
  <input type="submit" value="Done" data-theme="a" onClick="window.comment = document.getElementById('entered-comment').value;$('.comment-input').slideUp();utils.showRegister();">
</div>

<!-- <div data-role="page" id="index"> -->
<div class='login' id="login">
  <div class = 'login-header'><br>Please Login</div>

  <div class="alert-error" id="login-error" style="display:none;">
    Please check your username and password and try again.
  </div>

  <form id='login_form'>
    <br>
    <p class='label'>Username</p>
    <input type='text' name='username'>
    <p class ='label'>Password</p>
    <input type='password' name='password'>
    <button type="submit" data-theme="a" id="login-button">Login</button> 

  </div>
</form>
</div>



<div class='landing'>
  <div class='landing-intro'>
    <div class='landing-header'>

      The Collective Discovery Engine
    </div>
    <p> The "Collective Discovery Engine" is an interactive visual and social environment designed to allow participants to collaboratively generate, cultivate, and evaluate ideas around topics of mutual interest. </p><br>
    <p> <strong>Select a bloom</strong> to read an idea, and then <strong>rate it</strong> and add your own ideas. </p>
  </div>
  <div class="ui-body ui-body-b"
  <fieldset class="ui-grid-a">
    <button type="submit" data-theme="a"  onClick='utils.firstTime();' >First time</button>
    <button type="cancel" data-theme="b"  onClick='utils.showLogin();'>Login</button>
  </fieldset>
</div>
<br><br>
<img id="splash" src="./../media/mobile/os_splash.png" alt="opinionspace_splash" class="center"> 
</div>


</body>
</html>
